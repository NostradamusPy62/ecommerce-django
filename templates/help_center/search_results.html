{% extends 'base.html' %}
{% load static %}

{% block title %}üîç Resultados de B√∫squeda - Ayuda - DavBorn Store{% endblock %}

{% block content %}
<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Cyber Minimal CSS -->
<link href="{% static 'css/cyber-minimal.css' %}" rel="stylesheet">
<!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

<div class="container mt-4 cyber-bg" style="min-height: 100vh;">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb glass-effect px-3 py-2 rounded">
            <li class="breadcrumb-item">
                <a href="{% url 'help_center:help_center' %}" class="text-decoration-none">
                    <i class="fas fa-home me-1"></i>üè† Ayuda
                </a>
            </li>
            <li class="breadcrumb-item active text-white">üîç Resultados de B√∫squeda</li>
        </ol>
    </nav>

    <div class="card card-dashboard mb-4">
        <div class="card-body">
            <h1 class="text-gradient mb-3">üîç Resultados de B√∫squeda</h1>
            
            {% if query %}
            <p class="lead text-muted">
                Buscando: "<strong class="text-white">{{ query }}</strong>"
                <span class="badge bg-primary ms-2">{{ results.count }} resultados</span>
            </p>
            {% endif %}

            <!-- Nueva b√∫squeda -->
            <div class="row mb-4">
                <div class="col-md-8">
                    <form action="{% url 'help_center:search_help' %}" method="get">
                        <div class="input-group">
                            <input type="text" name="q" class="form-control" 
                                   placeholder="üîç Buscar otra cosa..." value="{{ query }}">
                            <button class="btn btn-primary" type="submit">
                                <i class="fas fa-search me-2"></i>Buscar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    {% if results %}
    <div class="card card-dashboard">
        <div class="card-header">
            <h5 class="card-title mb-0">
                <i class="fas fa-file-alt text-primary me-2"></i>üìù Art√≠culos Encontrados
            </h5>
        </div>
        <div class="card-body">
            <div class="list-group">
                {% for article in results %}
                <a href="{% url 'help_center:article_detail' article.slug %}" 
                   class="list-group-item list-group-item-action glass-effect hover-lift mb-3">
                    <div class="d-flex w-100 justify-content-between align-items-start">
                        <div class="flex-grow-1 me-3">
                            <h5 class="mb-2 text-white">{{ article.title }}</h5>
                            <p class="mb-2 text-muted">{{ article.content|truncatewords:25 }}</p>
                            <div class="d-flex flex-wrap gap-3">
                                <small class="text-muted">
                                    <i class="fas fa-tag me-1"></i>{{ article.category.name }}
                                </small>
                                <small class="text-muted">
                                    <i class="fas fa-eye me-1"></i>{{ article.view_count }} vistas
                                </small>
                                <small class="text-muted">
                                    <i class="fas fa-calendar me-1"></i>{{ article.updated_at|date:"d/m/Y" }}
                                </small>
                            </div>
                        </div>
                        <span class="badge bg-primary">
                            <i class="fas fa-arrow-right"></i>
                        </span>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
    </div>
    {% else %}
    <div class="card card-dashboard">
        <div class="card-body text-center py-5">
            <div class="cyber-glow mb-4">
                <i class="fas fa-search fa-4x text-muted"></i>
            </div>
            <h4 class="text-white mb-3">üîç No se encontraron resultados</h4>
            <p class="text-muted mb-4">
                {% if query %}
                No hay art√≠culos que coincidan con "<strong>{{ query }}</strong>".
                {% else %}
                Ingresa un t√©rmino de b√∫squeda para encontrar art√≠culos de ayuda.
                {% endif %}
            </p>
            <div class="d-flex justify-content-center gap-3 flex-wrap">
                <a href="{% url 'help_center:help_center' %}" class="btn btn-primary btn-lg">
                    <i class="fas fa-home me-2"></i>üè† Volver al Centro de Ayuda
                </a>
                <a href="{% url 'help_center:faq_list' %}" class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-question-circle me-2"></i>‚ùì Ver Preguntas Frecuentes
                </a>
            </div>

            <!-- Sugerencias -->
            <div class="row mt-5">
                <div class="col-md-8 mx-auto">
                    <div class="card glass-effect">
                        <div class="card-body">
                            <h6 class="text-gradient mb-3">üí° Sugerencias de b√∫squeda:</h6>
                            <div class="d-flex flex-wrap gap-2">
                                <a href="{% url 'help_center:search_help' %}?q=devoluci√≥n" class="btn btn-sm btn-outline-primary">devoluci√≥n</a>
                                <a href="{% url 'help_center:search_help' %}?q=pago" class="btn btn-sm btn-outline-primary">pago</a>
                                <a href="{% url 'help_center:search_help' %}?q=env√≠o" class="btn btn-sm btn-outline-primary">env√≠o</a>
                                <a href="{% url 'help_center:search_help' %}?q=cuenta" class="btn btn-sm btn-outline-primary">cuenta</a>
                                <a href="{% url 'help_center:search_help' %}?q=garant√≠a" class="btn btn-sm btn-outline-primary">garant√≠a</a>
                                <a href="{% url 'help_center:search_help' %}?q=pedido" class="btn btn-sm btn-outline-primary">pedido</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}